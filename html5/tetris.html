<html>
<head>
<script>
var cnt;
var x = 10;
var y = 4;

window.onload = function() {
    var cvs = document.getElementById('id_cvs');
    cnt = cvs.getContext('2d');

    window.addEventListener('keydown', keydownfunc, true);
    timerfunc();

    cnt.fillStyle = "rgb(0, 255, 255)";
    cnt.fillRect(0, 0, 320, 240);

    cnt.fillStyle = "rgb(255, 0, 0)";
    cnt.fillRect(60, 70, 200, 100);
}

var drawRect = function(r, g, b) {
    cnt.fillStyle = `rgb(${r}, ${g}, ${b})`;
    cnt.fillRect(x*16, y*16, 15, 15);
}

var timerfunc = function() {
    ++y;
    if (y > 15)
        y = 0;
    drawRect(0, 0, 0);
    setTimeout("timerfunc()", 1000);
}

var keydownfunc = function(event) {
    var code = event.keyCode;
    switch (code) {
    case 37:
        event.preventDefault();
        --x;
        break;
    case 39:
        event.preventDefault();
        ++x;
        break;
    case 38:
        event.preventDefault();
        --y;
        break;
    case 40:
        event.preventDefault();
        ++y;
        break;
    }
    drawRect(0, 0, 0);
}
</script>
</head>
<body>
<canvas id="id_cvs" width="320" height="240" />
</body>
</html>
